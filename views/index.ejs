<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>EJS Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
</head>
<body>
	<%= title %>
	<button id="click">click</button>
	<button id="why">click</button>
<!-- 	<form action="/face/info" method="post" enctype="multipart/form-data">
		<input name="pic" type="file" />
		<button type="submit">上传文件</button>
	</form> -->
	<input name="pic" type="file" id="imgFile" />
	<h1 id="beauty">你的颜值：</h1>
</body>
<script src="/javascripts/jquery-1.12.0.min.js"></script>
<script type="text/javascript">
/*	var domClick = document.getElementById('click');
	domClick.addEventListener('click',function(){
		var xhr = new XMLHttpRequest();
		xhr.responseType = "json";
		xhr.open('get','http://localhost:3000/dong',true);
		xhr.onload = function(e){
			console.log(xhr.response);
		}
	})
	*/
	$('#click').click(function(){
		$.get('/dong',function(res){
			console.log(res);
		})
	});
	$('#why').click(function(){
		$.get('/why',function(res){
			console.log(res);
		});
	});

	$('#imgFile').on('change',function(){
		var formData = new FormData();
		var file = $(this)[0].files[0];
		formData.append('pic',file);
		$.ajax({
			type:'POST',
			url:'/face/info',
			data:formData,
			processData:false,
			contentType:false,
			success:function(res){
				res = JSON.parse(res);
				console.log(res);
				$('#beauty').text("你的颜值："+res.result.face_list[0].beauty)
			}
		})
	})
</script>
</html>